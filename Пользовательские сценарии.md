<h1>1. Сценарий: студент загружает работу</h1>

ШАГ 1. Frontend → API Gateway
POST /student/works
{
  "studentId": "SOS1",
  "assignmentId": "HW01",
  "file": <binary>
}

ШАГ 2. Gateway → FileStoring Service
POST /files
body: <binary>

Ответ:

{ "fileId": "abc123" }

ШАГ 3. Gateway → FileAnalysis
POST /internal/works
{
  "studentId": "SOS1",
  "assignmentId": "HW01",
  "fileId": "abc123"
}

ШАГ 4. FileAnalysis → FileStoring

Для анализа FileAnalysis должен получить сам файл:

GET /files/abc123

Получает бинарный текст

ШАГ 5. FileAnalysis анализирует

Извлекает текст

Строит хэш

Ищет предыдущие работы в SQLite

Определяет плагиат

Создаёт Work + Report

Генерирует wordcloud через QuickChart

Сохраняет PNG локально и отдаёт URL

Шаг 6. FileAnalysis → Gateway (результат)
{
  "workId": "...",
  "report": {
    "isPlagiarism": false,
    "similarityScore": 0.0,
    "wordCloudUrl": "/wordclouds/abc123.png"
  }
}

<h1>2. Сценарий: преподаватель хочет получить отчёты по работе</h1>
ШАГ 1. Frontend → API Gateway
GET /teacher/works/{workId}/reports

ШАГ 2. Gateway → FileAnalysis
GET /internal/works/{workId}/reports

FileAnalysis отдаёт всю аналитику

<h1>3. Сценарий: преподаватель хочет получить  информацию по работам</h1>
ШАГ 1. Frontend → Gateway
GET /teacher/works?assignmentId=HW01

ШАГ 2. Gateway → FileAnalysis
GET /internal/works?assignmentId=HW01

<h1>4. Обработка ошибок</h1>
Gateway никогда не падает, он возвращает пользователю 400 File storing service error

Если студент не прикрепил файл, то система сообщит ему об этом
