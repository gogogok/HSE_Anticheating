<h1>1. Общая идея системы</h1>

Система предназначена для загрузки студенческих работ, их анализа на плагиат и предоставления преподавателю отчётов.
В архитектуре используется микросервисный подход — каждый сервис отвечает строго за свою зону ответственности.
Коммуникация —  HTTP-запросы через API Gateway.

<h1>2. Архитектура </h1>
<h2>1) API Gateway</h2>

Единственная точка входа для клиентов

Принимает запросы:

загрузка работы студентом

получение отчётов по работам

получение отчётов по работе

Передаёт операции в нужные микросервисы:

в FileStoring — загрузка/получение файлов

в FileAnalysis — создание работы, анализ, получение отчётов


<h2>2) File Storing Service</h2>

Хранение и выдача файлов

Функциональность:

Принимает файл и сохраняет в БД SQLLite 

Возвращает fileId.

По GET-запросу выдаёт файл.

Работает максимально локально и изолированно.

<h2>3) File Analysis Service</h2>

Анализ работ и управление БД с работами и отчётами

Функциональность:

Принимает команду на создание работы от Gateway

Запрашивает файл из FileStoring

Извлекает текст, вычисляет хэш

Находит предыдущие работы по тому же заданию

Определяет плагиат:

если найдено совпадение по TextHash, работа помечается как плагиат

Генерирует wordcloud через QuickChart API

Сохраняет Work и Report в SQLite через EF Core

Отдаёт отчёты и список работ

<h2>4) Хранилище (SQLite)</h2>

В FileAnalysisService используется FileAnalysisDbContext, который содержит таблицы:


| Поле | Тип | Описание |
|------|-----|----------|
| Id | INT PRIMARY KEY | Уникальный идентификатор работы |
| StudentId | INT | ID студента |
| AssignmentId | INT | ID задания |
| FileId | STRING | ID файла в storage |
| SubmittedAt | DATETIME | Дата и время отправки |
| TextHash | STRING | Хеш текста работы |

### Reports (Отчеты о проверке)
| Поле | Тип | Описание |
|------|-----|----------|
| Id | INT PRIMARY KEY | Уникальный идентификатор отчета |
| WorkId | INT FOREIGN KEY | ID проверяемой работы |
| CreatedAt | DATETIME | Дата создания отчета |
| SimilarityScore | DOUBLE | Процент схожести |
| IsPlagiarism | BOOLEAN | Флаг плагиата |
| WordCloudUrl | STRING | URL облака слов |



Миграции выполняются автоматически (EnsureCreated() создаёт таблицы при запуске контейнера)

<h1>3. Механизм определения плагиата</h1>

Получаем текст присланного файла.

Вычисляем хэш текста (SHA256)

Ищем в БД предыдущие работы

Если среди них есть TextHash == currentTextHash, отмечаем:

IsPlagiarism = true
SimilarityScore = 1.0


Иначе:

IsPlagiarism = false
SimilarityScore = 0.0

<h1>4. Контейнеризация</h1>

Каждый сервис имеет свой Dockerfile, а единый запуск происходит через:

docker compose up


Сервисы:

filestoring-api

fileanalysis-api

gateway-api

Используются тома для хранения файлов.

<h1>5. Визуализация WordCloud</h1>

Используется API QuickChart:

Генерация PNG с облаком слов

Сохранение изображения в локальную директорию.

Также в отчёте по Id ссылка на облако
